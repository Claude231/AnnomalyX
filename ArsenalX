--[[
    ╔═══════════════════════════════════════════════════════════╗
    ║           ANNOMALY X - Arsenal Module v9                  ║
    ║           Silent Aim disabled - Use DHE instead           ║
    ║           Creator: ElSacaLeche                            ║
    ╚═══════════════════════════════════════════════════════════╝
]]

if not getgenv().AX_Config then
    repeat task.wait() until getgenv().AX_Config
end

local Config = getgenv().AX_Config

local cloneref = cloneref or function(o) return o end
local newcclosure = newcclosure or function(f) return f end
local hookfunction = hookfunction or replaceclosure or detour_function

local Players = cloneref(game:GetService("Players"))
local RunService = cloneref(game:GetService("RunService"))
local StarterGui = cloneref(game:GetService("StarterGui"))

local LocalPlayer = Players.LocalPlayer

-- ============================================
-- KICK PROTECTION
-- ============================================

pcall(function()
    local oldKick = LocalPlayer.Kick
    if typeof(oldKick) == "function" then
        hookfunction(oldKick, newcclosure(function(self, ...)
            if self == LocalPlayer then return end
            return oldKick(self, ...)
        end))
    end
end)

pcall(function()
    local SC = cloneref(game:GetService("ScriptContext"))
    if getconnections then
        for _, conn in ipairs(getconnections(SC.Error)) do
            pcall(function() conn:Disable() end)
        end
    end
end)

-- ============================================
-- DISABLE SILENT AIM FOR ARSENAL
-- Force it off and notify user
-- ============================================

Config.Silent.Enabled = false
Config.Silent.Active = false

task.spawn(function()
    task.wait(4)
    pcall(function()
        StarterGui:SetCore("SendNotification", {
            Title = "⚡ ANNOMALY X - Arsenal",
            Text = "Silent Aim is not available for Arsenal. Use DHE (H key) + Aimbot (Q key) instead!",
            Duration = 10
        })
    end)
end)

-- Block user from enabling Silent Aim
task.spawn(function()
    while task.wait(1) do
        if Config.Silent.Enabled or Config.Silent.Active then
            Config.Silent.Enabled = false
            Config.Silent.Active = false
            pcall(function()
                StarterGui:SetCore("SendNotification", {
                    Title = "⚠ Arsenal",
                    Text = "Silent Aim not available. Use DHE (H key) for hitbox expansion!",
                    Duration = 5
                })
            end)
        end
    end
end)

-- ============================================
-- SIGNAL
-- ============================================
getgenv().AX_ArsenalLoaded = true

print("  ✅ ARSENAL MODULE v9 loaded")
print("  ⚠ Silent Aim: Disabled for Arsenal")
print("  ✅ Use DHE (H key) + Aimbot (Q key)")
